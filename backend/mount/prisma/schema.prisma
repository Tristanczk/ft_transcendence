generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  //   url      = "postgresql://postgres:n2J5dJGelC0W4UEtiHkMZRrdrSHsLKr7@localhost:5432/nest?schema=public"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())

  login      String  @unique
  nickname   String  @unique
  email      String  @unique
  hash       String?
  avatarPath String
  friends    String  @default("[]")

  elo     Int
  loginNb Int

  twoFactorAuthentication Boolean @default(false)
  isConnected             Boolean @default(false)
  twoFactorSecret         String?

  currentHashedRefreshToken String?
}

// model Friends {
//     id        Int      @id @default(autoincrement())
//     createdAt DateTime @default(now())
//     idUserA   Int
//     idUserB   Int
// }

// model Connections {
//     id           Int      @id @default(autoincrement())
//     createdAt    DateTime @default(now())
//     idUser       Int
//     idConnection String
// }

model Channels {
    id          Int       @id @default(autoincrement())
    idAdmin     Int[]
    idUsers     Int[]
    name        String
    isPublic    Boolean   @default(true)
    password    String?
    createdAt   DateTime  @default(now())
}

model Message {
    id         Int        @id @default(autoincrement())
    idChannel  Int
    idSender   Int
    content    String
    createdAt  DateTime   @default(now())
}

model Games {
  id         Int      @id @default(autoincrement())
  createdAt  DateTime @default(now())
  finishedAt DateTime
  playerA    Int
  playerB    Int
  finished   Boolean
  won        Boolean
  scoreA     Int
  scoreB     Int
}
