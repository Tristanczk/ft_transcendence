generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    //   url      = "postgresql://postgres:n2J5dJGelC0W4UEtiHkMZRrdrSHsLKr7@localhost:5432/nest?schema=public"
    url      = env("DB_URL")
}

model User {
    id        Int      @id @default(autoincrement())
    createdAt DateTime @default(now())

    login      	String  @unique
    nickname   	String  @unique
    email      	String  @unique
    hash      	String?
    avatarPath	String
	friends		String	@default("[]")

    elo     Int
    loginNb Int

    twoFactorAuthentication Boolean @default(false)
    isConnected             Boolean @default(false)
    twoFactorSecret         String?

	gamesasPlayerA	Games[] @relation("PlayerAGames")
	gamesasPlayerB	Games[] @relation("PlayerBGames")
}

model Games {
    id         Int      @id @default(autoincrement())
    createdAt  DateTime @default(now())
    finishedAt DateTime
    finished   Boolean
    won        Boolean
    scoreA     Int
    scoreB     Int
	mode	   Int
	varEloA	   Int
	varEloB	   Int

	playerA    	Int
	UserA		User @relation("PlayerAGames", fields: [playerA], references: [id])
	playerB    	Int
	UserB		User @relation("PlayerBGames", fields: [playerB], references: [id])
}
